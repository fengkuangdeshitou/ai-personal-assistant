#!/bin/bash

# ðŸŽ¯ VS Code ç¡®è®¤å¯¹è¯æ¡†ç»ˆæžè§£å†³æ–¹æ¡ˆ
# ==================================

echo "ðŸŽ¯ VS Code ç¡®è®¤å¯¹è¯æ¡†è§£å†³æ–¹æ¡ˆ"
echo "============================"
echo ""
echo "ðŸ“‹ é—®é¢˜åˆ†æžï¼š"
echo "   VS Code æ¯æ¬¡æ‰§è¡Œè„šæœ¬éƒ½ä¼šå¼¹å‡º'å…è®¸'ç¡®è®¤å¯¹è¯æ¡†"
echo ""
echo "ðŸ”§ è§£å†³æ–¹æ¡ˆï¼š"
echo ""

echo "æ–¹æ¡ˆ1: ä¿®æ”¹ VS Code è®¾ç½® (ä¸€åŠ³æ°¸é€¸)"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "1. æ‰“å¼€ VS Code"
echo "2. æŒ‰ Cmd+, æ‰“å¼€è®¾ç½®"
echo "3. æœç´¢ 'trust'"
echo "4. å–æ¶ˆå‹¾é€‰ 'Security: Workspace Trust Enabled'"
echo ""

echo "æ–¹æ¡ˆ2: ä½¿ç”¨ç»ˆç«¯ç›´æŽ¥æ‰§è¡Œ (ç«‹å³å¯ç”¨)"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "å‘½ä»¤: bash /path/to/script.sh"
echo "ç¤ºä¾‹: bash ~/.ai-assistant/scripts/auto_confirm_demo.sh"
echo ""

echo "æ–¹æ¡ˆ3: ä½¿ç”¨æˆ‘ä»¬çš„å¿«é€Ÿæ‰§è¡Œåˆ«å"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "â€¢ å¿«é€Ÿæ‰§è¡Œ /path/to/script.sh"
echo "â€¢ vsæ‰§è¡Œ /path/to/script.sh"
echo "â€¢ æ™ºèƒ½æ‰§è¡Œ /path/to/script.sh"
echo ""

echo "ðŸ§ª çŽ°åœ¨æµ‹è¯•ä¸€ä¸‹ï¼"
echo ""

# åˆ›å»ºä¸€ä¸ªç®€å•çš„æµ‹è¯•è„šæœ¬
TEST_FILE="/tmp/vscode_confirm_test.sh"
cat > "$TEST_FILE" << 'EOF'
#!/bin/bash
echo "ðŸŽ‰ æµ‹è¯•æˆåŠŸï¼è¿™ä¸ªè„šæœ¬è¿è¡Œæ—¶æ²¡æœ‰å¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†ï¼"
echo "ðŸ“… æ—¶é—´: $(date)"
echo "ðŸš€ å¦‚æžœæ‚¨åœ¨ VS Code ç»ˆç«¯ä¸­çœ‹åˆ°æ­¤æ¶ˆæ¯ï¼Œè¯´æ˜Žé—®é¢˜å·²è§£å†³ï¼"
EOF

chmod +x "$TEST_FILE"

echo "ðŸ“ å·²åˆ›å»ºæµ‹è¯•è„šæœ¬: $TEST_FILE"
echo ""
echo "ðŸš€ è¯·åœ¨ VS Code ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹ä»»ä¸€å‘½ä»¤ï¼š"
echo ""
echo "   bash $TEST_FILE"
echo ""
echo "   æˆ–è€…"
echo ""
echo "   å¿«é€Ÿæ‰§è¡Œ $TEST_FILE"
echo ""

# å¦‚æžœåœ¨ç»ˆç«¯ä¸­ï¼Œç›´æŽ¥æ‰§è¡Œæµ‹è¯•
echo "â³ 3ç§’åŽè‡ªåŠ¨æ‰§è¡Œæµ‹è¯•..."
sleep 3
echo ""
echo "ðŸš€ æ‰§è¡Œæµ‹è¯•è„šæœ¬ï¼š"
bash "$TEST_FILE"

echo ""
echo "ðŸ’¡ é‡è¦æç¤ºï¼š"
echo "   å¦‚æžœæ‚¨æ˜¯åœ¨ VS Code çš„é›†æˆç»ˆç«¯ä¸­è¿è¡Œæ­¤è„šæœ¬ï¼Œ"
echo "   è€Œä¸”æ²¡æœ‰çœ‹åˆ°ç¡®è®¤å¯¹è¯æ¡†ï¼Œé‚£ä¹ˆé—®é¢˜å·²ç»è§£å†³ï¼"
echo ""
echo "   å¦‚æžœä»æœ‰ç¡®è®¤å¯¹è¯æ¡†ï¼Œè¯·ï¼š"
echo "   1. é‡å¯ VS Code"
echo "   2. æˆ–è€…ä½¿ç”¨ 'bash script.sh' å‘½ä»¤"
echo "   3. æˆ–è€…ä¿®æ”¹ VS Code ä¿¡ä»»è®¾ç½®"