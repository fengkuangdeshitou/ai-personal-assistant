{"ast":null,"code":"import axios from 'axios';\n\n// API响应接口\n\n// 聊天消息接口\n\n// 发送消息请求接口\n\n// 创建axios实例\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:5178',\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// 请求拦截器\napi.interceptors.request.use(config => {\n  var _config$method;\n  // 可以在这里添加认证token等\n  console.log('API Request:', (_config$method = config.method) === null || _config$method === void 0 ? void 0 : _config$method.toUpperCase(), config.url);\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// 响应拦截器\napi.interceptors.response.use(response => {\n  console.log('API Response:', response.status, response.config.url);\n  return response;\n}, error => {\n  console.error('API Error:', error);\n  if (error.response) {\n    // 服务器返回了错误状态码\n    console.error('Response Error:', error.response.status, error.response.data);\n  } else if (error.request) {\n    // 请求发送了但没有收到响应\n    console.error('Request Error: No response received');\n  } else {\n    // 其他错误\n    console.error('Request Setup Error:', error.message);\n  }\n  return Promise.reject(error);\n});\n\n// API方法\nexport const chatApi = {\n  // 发送聊天消息\n  sendMessage: async data => {\n    const response = await api.post('/api/chat/send', data);\n    return response.data;\n  },\n  // 获取聊天历史\n  getHistory: async limit => {\n    const params = limit ? {\n      limit\n    } : {};\n    const response = await api.get('/api/chat/history', {\n      params\n    });\n    return response.data;\n  },\n  // 清空聊天历史\n  clearHistory: async () => {\n    const response = await api.delete('/api/chat/clear');\n    return response.data;\n  }\n};\n\n// 项目管理API\nexport const projectApi = {\n  // 获取项目列表\n  getProjects: async () => {\n    const response = await api.get('/api/projects');\n    return response.data;\n  },\n  // 扫描项目\n  scanProjects: async () => {\n    const response = await api.post('/api/projects/scan');\n    return response.data;\n  }\n};\n\n// Git操作API\nexport const gitApi = {\n  // 获取Git统计信息\n  getStats: async projectPath => {\n    const response = await api.get('/api/git/stats', {\n      params: {\n        projectPath\n      }\n    });\n    return response.data;\n  },\n  // 获取提交历史\n  getCommits: async (projectPath, limit = 10) => {\n    const response = await api.get('/api/git/commits', {\n      params: {\n        projectPath,\n        limit\n      }\n    });\n    return response.data;\n  },\n  // Git Pull\n  pull: async path => {\n    const response = await api.post('/api/git/pull', {\n      path\n    });\n    return response.data;\n  },\n  // Git Push\n  push: async (path, message) => {\n    const response = await api.post('/api/git/push', {\n      path,\n      message\n    });\n    return response.data;\n  }\n};\n\n// 构建API\nexport const buildApi = {\n  // 构建项目\n  build: async projectPath => {\n    const response = await api.post('/api/build', {\n      projectPath\n    });\n    return response.data;\n  },\n  // 流式构建项目\n  buildStream: async (projectName, channel) => {\n    const response = await api.post('/api/build-stream', {\n      projectName,\n      channel\n    }, {\n      responseType: 'stream'\n    });\n    return response.data;\n  },\n  // 清空构建目录\n  clearBuild: async projectPath => {\n    const response = await api.post('/api/build/clear', {\n      projectPath\n    });\n    return response.data;\n  }\n};\n\n// OSS上传API\nexport const ossApi = {\n  // 上传文件\n  upload: async formData => {\n    const response = await api.post('/api/oss/upload', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n    return response.data;\n  },\n  // 流式上传到OSS\n  uploadStream: async (projectName, path, channelId, env) => {\n    const response = await api.post('/api/upload-stream', {\n      projectName,\n      path,\n      channelId,\n      env\n    }, {\n      responseType: 'stream'\n    });\n    return response.data;\n  },\n  // 获取OSS bucket信息\n  getBucketInfo: async (projectName, channelId, env) => {\n    const response = await api.post('/api/oss/get-bucket-info', {\n      projectName,\n      channelId,\n      env\n    });\n    return response.data;\n  },\n  // 获取项目的OSS配置\n  getProjectBuckets: async projectName => {\n    const response = await api.get(`/api/project-buckets/${projectName}`);\n    return response.data;\n  },\n  // 获取项目的渠道配置\n  getProjectChannels: async projectName => {\n    const response = await api.get(`/api/channels/${projectName}`);\n    return response.data;\n  }\n};\nexport default api;","map":{"version":3,"names":["axios","api","create","baseURL","process","env","REACT_APP_API_URL","timeout","headers","interceptors","request","use","config","_config$method","console","log","method","toUpperCase","url","error","Promise","reject","response","status","data","message","chatApi","sendMessage","post","getHistory","limit","params","get","clearHistory","delete","projectApi","getProjects","scanProjects","gitApi","getStats","projectPath","getCommits","pull","path","push","buildApi","build","buildStream","projectName","channel","responseType","clearBuild","ossApi","upload","formData","uploadStream","channelId","getBucketInfo","getProjectBuckets","getProjectChannels"],"sources":["/Users/maiyou001/.ai-assistant/gui/frontend/src/api/client.ts"],"sourcesContent":["import axios, { AxiosInstance, AxiosResponse } from 'axios';\n\n// API响应接口\nexport interface ApiResponse<T = any> {\n  success?: boolean;\n  ok?: boolean;\n  message?: T;\n  error?: string;\n  history?: ChatMessage[];\n}\n\n// 聊天消息接口\nexport interface ChatMessage {\n  id: number;\n  role: 'user' | 'assistant';\n  content: string;\n  timestamp: string;\n}\n\n// 发送消息请求接口\nexport interface SendMessageRequest {\n  message: string;\n  model?: string;\n}\n\n// 创建axios实例\nconst api: AxiosInstance = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:5178',\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// 请求拦截器\napi.interceptors.request.use(\n  (config: any) => {\n    // 可以在这里添加认证token等\n    console.log('API Request:', config.method?.toUpperCase(), config.url);\n    return config;\n  },\n  (error: any) => {\n    return Promise.reject(error);\n  }\n);\n\n// 响应拦截器\napi.interceptors.response.use(\n  (response: AxiosResponse) => {\n    console.log('API Response:', response.status, response.config.url);\n    return response;\n  },\n  (error: any) => {\n    console.error('API Error:', error);\n    if (error.response) {\n      // 服务器返回了错误状态码\n      console.error('Response Error:', error.response.status, error.response.data);\n    } else if (error.request) {\n      // 请求发送了但没有收到响应\n      console.error('Request Error: No response received');\n    } else {\n      // 其他错误\n      console.error('Request Setup Error:', error.message);\n    }\n    return Promise.reject(error);\n  }\n);\n\n// API方法\nexport const chatApi = {\n  // 发送聊天消息\n  sendMessage: async (data: SendMessageRequest): Promise<ApiResponse<ChatMessage>> => {\n    const response = await api.post('/api/chat/send', data);\n    return response.data;\n  },\n\n  // 获取聊天历史\n  getHistory: async (limit?: number): Promise<ApiResponse<ChatMessage[]>> => {\n    const params = limit ? { limit } : {};\n    const response = await api.get('/api/chat/history', { params });\n    return response.data;\n  },\n\n  // 清空聊天历史\n  clearHistory: async (): Promise<ApiResponse> => {\n    const response = await api.delete('/api/chat/clear');\n    return response.data;\n  },\n};\n\n// 项目管理API\nexport const projectApi = {\n  // 获取项目列表\n  getProjects: async (): Promise<ApiResponse> => {\n    const response = await api.get('/api/projects');\n    return response.data;\n  },\n\n  // 扫描项目\n  scanProjects: async (): Promise<ApiResponse> => {\n    const response = await api.post('/api/projects/scan');\n    return response.data;\n  },\n};\n\n// Git操作API\nexport const gitApi = {\n  // 获取Git统计信息\n  getStats: async (projectPath: string): Promise<ApiResponse> => {\n    const response = await api.get('/api/git/stats', {\n      params: { projectPath }\n    });\n    return response.data;\n  },\n\n  // 获取提交历史\n  getCommits: async (projectPath: string, limit = 10): Promise<ApiResponse> => {\n    const response = await api.get('/api/git/commits', {\n      params: { projectPath, limit }\n    });\n    return response.data;\n  },\n\n  // Git Pull\n  pull: async (path: string): Promise<ApiResponse> => {\n    const response = await api.post('/api/git/pull', { path });\n    return response.data;\n  },\n\n  // Git Push\n  push: async (path: string, message?: string): Promise<ApiResponse> => {\n    const response = await api.post('/api/git/push', { path, message });\n    return response.data;\n  },\n};\n\n// 构建API\nexport const buildApi = {\n  // 构建项目\n  build: async (projectPath: string): Promise<ApiResponse> => {\n    const response = await api.post('/api/build', { projectPath });\n    return response.data;\n  },\n\n  // 流式构建项目\n  buildStream: async (projectName: string, channel?: string): Promise<Response> => {\n    const response = await api.post('/api/build-stream', { projectName, channel }, {\n      responseType: 'stream'\n    });\n    return response.data;\n  },\n\n  // 清空构建目录\n  clearBuild: async (projectPath: string): Promise<ApiResponse> => {\n    const response = await api.post('/api/build/clear', { projectPath });\n    return response.data;\n  },\n};\n\n// OSS上传API\nexport const ossApi = {\n  // 上传文件\n  upload: async (formData: FormData): Promise<ApiResponse> => {\n    const response = await api.post('/api/oss/upload', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n    });\n    return response.data;\n  },\n\n  // 流式上传到OSS\n  uploadStream: async (projectName: string, path: string, channelId: string, env: string): Promise<Response> => {\n    const response = await api.post('/api/upload-stream', { projectName, path, channelId, env }, {\n      responseType: 'stream'\n    });\n    return response.data;\n  },\n\n  // 获取OSS bucket信息\n  getBucketInfo: async (projectName: string, channelId: string, env: string): Promise<ApiResponse> => {\n    const response = await api.post('/api/oss/get-bucket-info', { projectName, channelId, env });\n    return response.data;\n  },\n\n  // 获取项目的OSS配置\n  getProjectBuckets: async (projectName: string): Promise<ApiResponse> => {\n    const response = await api.get(`/api/project-buckets/${projectName}`);\n    return response.data;\n  },\n\n  // 获取项目的渠道配置\n  getProjectChannels: async (projectName: string): Promise<ApiResponse> => {\n    const response = await api.get(`/api/channels/${projectName}`);\n    return response.data;\n  },\n};\n\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}