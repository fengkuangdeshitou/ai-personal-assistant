{"ast":null,"code":"import axios from'axios';// API响应接口\n// 聊天消息接口\n// 发送消息请求接口\n// 创建axios实例\nconst api=axios.create({baseURL:process.env.REACT_APP_API_URL||'http://localhost:5178',timeout:10000,headers:{'Content-Type':'application/json'}});// 请求拦截器\napi.interceptors.request.use(config=>{var _config$method;// 可以在这里添加认证token等\nconsole.log('API Request:',(_config$method=config.method)===null||_config$method===void 0?void 0:_config$method.toUpperCase(),config.url);return config;},error=>{return Promise.reject(error);});// 响应拦截器\napi.interceptors.response.use(response=>{console.log('API Response:',response.status,response.config.url);return response;},error=>{console.error('API Error:',error);if(error.response){// 服务器返回了错误状态码\nconsole.error('Response Error:',error.response.status,error.response.data);}else if(error.request){// 请求发送了但没有收到响应\nconsole.error('Request Error: No response received');}else{// 其他错误\nconsole.error('Request Setup Error:',error.message);}return Promise.reject(error);});// API方法\nexport const chatApi={// 发送聊天消息\nsendMessage:async data=>{const response=await api.post('/api/chat/send',data);return response.data;},// 获取聊天历史\ngetHistory:async limit=>{const params=limit?{limit}:{};const response=await api.get('/api/chat/history',{params});return response.data;},// 清空聊天历史\nclearHistory:async()=>{const response=await api.delete('/api/chat/clear');return response.data;}};// 项目管理API\nexport const projectApi={// 获取项目列表\ngetProjects:async()=>{const response=await api.get('/api/projects');return response.data;},// 扫描项目\nscanProjects:async()=>{const response=await api.post('/api/projects/scan');return response.data;}};// Git操作API\nexport const gitApi={// 获取Git统计信息\ngetStats:async projectPath=>{const response=await api.get('/api/git/stats',{params:{projectPath}});return response.data;},// 获取提交历史\ngetCommits:async function(projectPath){let limit=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10;const response=await api.get('/api/git/commits',{params:{projectPath,limit}});return response.data;}};// 构建API\nexport const buildApi={// 构建项目\nbuild:async projectPath=>{const response=await api.post('/api/build',{projectPath});return response.data;},// 清空构建目录\nclearBuild:async projectPath=>{const response=await api.post('/api/build/clear',{projectPath});return response.data;}};// OSS上传API\nexport const ossApi={// 上传文件\nupload:async formData=>{const response=await api.post('/api/oss/upload',formData,{headers:{'Content-Type':'multipart/form-data'}});return response.data;}};export default api;","map":{"version":3,"names":["axios","api","create","baseURL","process","env","REACT_APP_API_URL","timeout","headers","interceptors","request","use","config","_config$method","console","log","method","toUpperCase","url","error","Promise","reject","response","status","data","message","chatApi","sendMessage","post","getHistory","limit","params","get","clearHistory","delete","projectApi","getProjects","scanProjects","gitApi","getStats","projectPath","getCommits","arguments","length","undefined","buildApi","build","clearBuild","ossApi","upload","formData"],"sources":["/Users/maiyou001/.ai-assistant/gui/frontend/src/api/client.ts"],"sourcesContent":["import axios, { AxiosInstance, AxiosResponse } from 'axios';\n\n// API响应接口\nexport interface ApiResponse<T = any> {\n  success: boolean;\n  message?: T;\n  error?: string;\n  history?: ChatMessage[];\n}\n\n// 聊天消息接口\nexport interface ChatMessage {\n  id: number;\n  role: 'user' | 'assistant';\n  content: string;\n  timestamp: string;\n}\n\n// 发送消息请求接口\nexport interface SendMessageRequest {\n  message: string;\n  model?: string;\n}\n\n// 创建axios实例\nconst api: AxiosInstance = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:5178',\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// 请求拦截器\napi.interceptors.request.use(\n  (config: any) => {\n    // 可以在这里添加认证token等\n    console.log('API Request:', config.method?.toUpperCase(), config.url);\n    return config;\n  },\n  (error: any) => {\n    return Promise.reject(error);\n  }\n);\n\n// 响应拦截器\napi.interceptors.response.use(\n  (response: AxiosResponse) => {\n    console.log('API Response:', response.status, response.config.url);\n    return response;\n  },\n  (error: any) => {\n    console.error('API Error:', error);\n    if (error.response) {\n      // 服务器返回了错误状态码\n      console.error('Response Error:', error.response.status, error.response.data);\n    } else if (error.request) {\n      // 请求发送了但没有收到响应\n      console.error('Request Error: No response received');\n    } else {\n      // 其他错误\n      console.error('Request Setup Error:', error.message);\n    }\n    return Promise.reject(error);\n  }\n);\n\n// API方法\nexport const chatApi = {\n  // 发送聊天消息\n  sendMessage: async (data: SendMessageRequest): Promise<ApiResponse<ChatMessage>> => {\n    const response = await api.post('/api/chat/send', data);\n    return response.data;\n  },\n\n  // 获取聊天历史\n  getHistory: async (limit?: number): Promise<ApiResponse<ChatMessage[]>> => {\n    const params = limit ? { limit } : {};\n    const response = await api.get('/api/chat/history', { params });\n    return response.data;\n  },\n\n  // 清空聊天历史\n  clearHistory: async (): Promise<ApiResponse> => {\n    const response = await api.delete('/api/chat/clear');\n    return response.data;\n  },\n};\n\n// 项目管理API\nexport const projectApi = {\n  // 获取项目列表\n  getProjects: async (): Promise<ApiResponse> => {\n    const response = await api.get('/api/projects');\n    return response.data;\n  },\n\n  // 扫描项目\n  scanProjects: async (): Promise<ApiResponse> => {\n    const response = await api.post('/api/projects/scan');\n    return response.data;\n  },\n};\n\n// Git操作API\nexport const gitApi = {\n  // 获取Git统计信息\n  getStats: async (projectPath: string): Promise<ApiResponse> => {\n    const response = await api.get('/api/git/stats', {\n      params: { projectPath }\n    });\n    return response.data;\n  },\n\n  // 获取提交历史\n  getCommits: async (projectPath: string, limit = 10): Promise<ApiResponse> => {\n    const response = await api.get('/api/git/commits', {\n      params: { projectPath, limit }\n    });\n    return response.data;\n  },\n};\n\n// 构建API\nexport const buildApi = {\n  // 构建项目\n  build: async (projectPath: string): Promise<ApiResponse> => {\n    const response = await api.post('/api/build', { projectPath });\n    return response.data;\n  },\n\n  // 清空构建目录\n  clearBuild: async (projectPath: string): Promise<ApiResponse> => {\n    const response = await api.post('/api/build/clear', { projectPath });\n    return response.data;\n  },\n};\n\n// OSS上传API\nexport const ossApi = {\n  // 上传文件\n  upload: async (formData: FormData): Promise<ApiResponse> => {\n    const response = await api.post('/api/oss/upload', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n    });\n    return response.data;\n  },\n};\n\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}